async function e(a,t={},o=3,l=15e3,y=1e3){for(let i=0;i<o;i++){const c=new AbortController,p=setTimeout(()=>c.abort(),l);try{const s=await fetch(a,{...t,signal:c.signal});if(clearTimeout(p),!s.ok){let r="Request failed";try{r=(await s.json()).message||r}catch{}throw new Error(r)}return await s.json()}catch(s){if(clearTimeout(p),i===o-1||s.name!=="AbortError"&&!s.message.includes("NetworkError")&&!s.message.includes("Failed to fetch"))throw s;await new Promise(r=>setTimeout(r,y*(i+1)))}}}const u="https://0a6787d05d83.ngrok-free.app",n=a=>`${u}${a}`,h=async a=>await e(n("/api/farmers"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),m=async a=>await e(n(`/api/farmers/${a}`),{method:"DELETE"}),w=async()=>await e(n("/api/farmers")),f=async(a,t)=>await e(n("/api/farmers/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:t})}),g=async a=>{try{return await e(n("/api/claims"),{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Pragma:"no-cache"},body:JSON.stringify(a)},3,3e4)}catch(t){throw t.name==="AbortError"?new Error("Request timed out. Please check your internet connection and try again."):t.message.includes("Failed to fetch")?new Error("Network error. Please check your internet connection and try again."):t}},T=async(a=null)=>{let t="/api/claims";return a&&(t+=`?farmerId=${a}`),await e(n(t))},C=async(a,t)=>await e(n(`/api/claims/${a}`),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),S=async a=>await e(n("/api/assistance"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),E=async()=>await e(n("/api/assistance")),A=async a=>await e(n("/api/assistance/apply"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),O=async a=>await e(n(`/api/assistance/applications/${a}`)),b=async()=>await e(n("/api/assistance/applications")),P=async(a,t)=>await e(n(`/api/assistance/applications/${a}`),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),j=async a=>await e(n(`/api/assistance/${a}`),{method:"DELETE"}),N=async a=>await e(n("/api/crop-insurance"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),$=async(a=null)=>{let t="/api/crop-insurance";return a&&(t=`/api/crop-insurance/farmer/${a}`),await e(n(t))},J=async(a,t)=>await e(n(`/api/crop-insurance/${a}`),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),F=async a=>await e(n(`/api/crop-insurance/${a}`),{method:"DELETE"}),k=async()=>await e(n("/api/crop-insurance/stats/overview"));export{T as a,N as b,g as c,F as d,m as e,$ as f,C as g,S as h,j as i,A as j,P as k,f as l,w as m,E as n,O as o,b as p,k as q,h as r,J as u};
