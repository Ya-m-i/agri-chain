import{j as e,u as Ne}from"./index-C7MfAWZ9.js";import{r as c,u as Pe}from"./react-vendor-BxZgPAjv.js";import{u as y}from"./notificationStore-DoJOU00u.js";import{W as qe,Q as ue,R as je,Y as Oe,Z as Qe,_ as Be,$ as He,u as ve,i as W,e as X,l as We,P as Ye,s as _e,t as de,X as T,S as Ue,E as Ve,I as oe,w as Ge,B as be,x as Je,h as ye,C as ne,j as Xe,y as Ze,z as Ke,a0 as fe,g as F,o as ce}from"./ui-vendor-H8vV7eUV.js";import{f as es}from"./FarmLogo-CyHueQiE.js";import{a as we,e as ss,h as ts,i as as,o as rs,p as is}from"./useAPI-BUP9fbcG.js";import{c as ls,b as ns,g as cs,a as ds,d as os}from"./insuranceUtils-CCXz5kst.js";import{D as ms,C as xs,h as hs,e as ps,f as gs}from"./chart-vendor-tJ30bZZP.js";import"./vendor-BeACQViu.js";import"./api-BmLc-wA4.js";const us=()=>{const[t,A]=c.useState(null),[$,N]=c.useState(!0),[h,b]=c.useState(null);c.useEffect(()=>{(async()=>{try{await new Promise(p=>setTimeout(p,1e3)),A({location:"San Isidro, Quezon City",temperature:32,condition:"Partly Cloudy",humidity:75,windSpeed:12,forecast:[{day:"Today",condition:"Partly Cloudy",high:32,low:24},{day:"Tomorrow",condition:"Rain",high:30,low:23},{day:"Wed",condition:"Thunderstorm",high:29,low:23},{day:"Thu",condition:"Rain",high:28,low:22},{day:"Fri",condition:"Partly Cloudy",high:31,low:23}]}),N(!1)}catch{b("Failed to load weather data"),N(!1)}})()},[]);const D=j=>{switch(j.toLowerCase()){case"clear":case"sunny":return e.jsx(He,{className:"h-8 w-8 text-yellow-500"});case"partly cloudy":case"cloudy":return e.jsx(je,{className:"h-8 w-8 text-gray-500"});case"rain":return e.jsx(ue,{className:"h-8 w-8 text-blue-500"});case"thunderstorm":return e.jsx(Be,{className:"h-8 w-8 text-purple-500"});case"snow":return e.jsx(Qe,{className:"h-8 w-8 text-blue-200"});case"drizzle":return e.jsx(Oe,{className:"h-8 w-8 text-blue-400"});default:return e.jsx(je,{className:"h-8 w-8 text-gray-400"})}};return $?e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]}):h?e.jsx("div",{className:"bg-white rounded-xl shadow p-4",children:e.jsx("p",{className:"text-red-500",children:h})}):t?e.jsxs("div",{className:"bg-white rounded-xl shadow p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:t.location}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-3xl font-bold",children:[t.temperature,"°C"]}),e.jsx("span",{className:"ml-2 text-gray-600",children:t.condition})]})]}),e.jsx("div",{children:D(t.condition)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(qe,{className:"h-4 w-4 mr-1 text-gray-500"}),e.jsxs("span",{children:["Wind: ",t.windSpeed," km/h"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ue,{className:"h-4 w-4 mr-1 text-gray-500"}),e.jsxs("span",{children:["Humidity: ",t.humidity,"%"]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:"5-Day Forecast"}),e.jsx("div",{className:"grid grid-cols-5 gap-1 text-xs",children:t.forecast.map((j,k)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium",children:j.day}),e.jsx("div",{className:"my-1",children:D(j.condition)}),e.jsxs("div",{children:[j.high,"° / ",j.low,"°"]})]},k))})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-2 text-xs text-yellow-800",children:[e.jsx("p",{className:"font-medium",children:"Weather Alert"}),e.jsx("p",{children:"Heavy rainfall expected in the next 48 hours. Consider protective measures for your crops."})]})})]}):null},js=({status:t,claimId:A,submittedDate:$,reviewDate:N,completionDate:h,notes:b})=>{const D=[{id:"submitted",label:"Submitted",icon:e.jsx(ve,{className:"h-6 w-6"})},{id:"under-review",label:"Under Review",icon:e.jsx(W,{className:"h-6 w-6"})},{id:"approved",label:"Approved",icon:e.jsx(X,{className:"h-6 w-6"})},{id:"rejected",label:"Rejected",icon:e.jsx(We,{className:"h-6 w-6"})}],j=D.findIndex(p=>p.id===t),k=t==="rejected";return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 w-full max-w-3xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Claim Status"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Claim ID: ",A]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-0 top-0 h-full w-1 bg-gray-200 z-0",style:{left:"1.25rem",transform:"translateX(-50%)"}}),e.jsx("div",{className:"space-y-8 relative z-10",children:D.map((p,d)=>{if(p.id==="rejected"&&t==="approved"||p.id==="approved"&&t==="rejected")return null;const v=d===j,m=d<j||k&&p.id==="rejected"||!k&&p.id==="approved"&&t==="approved";return e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:`rounded-full p-2 flex-shrink-0 ${v?"bg-yellow-500 text-white":m?p.id==="rejected"?"bg-red-500 text-white":"bg-green-500 text-white":"bg-gray-200 text-gray-400"}`,children:p.icon}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:`font-semibold ${v?"text-yellow-600":m?p.id==="rejected"?"text-red-600":"text-green-600":"text-gray-400"}`,children:p.label}),e.jsxs("p",{className:"text-sm text-gray-500",children:[p.id==="submitted"&&$,p.id==="under-review"&&(m||v)&&(N||"In progress"),(p.id==="approved"||p.id==="rejected")&&(m||v)&&(h||"Processing")]}),v&&b&&e.jsx("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-sm",children:b})]})]},p.id)})})]}),e.jsxs("div",{className:"mt-8 pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"What happens next?"}),t==="submitted"&&e.jsx("p",{className:"text-sm text-gray-600",children:"Your claim has been submitted and is waiting to be reviewed by our team. This typically takes 1-2 business days."}),t==="under-review"&&e.jsx("p",{className:"text-sm text-gray-600",children:"Our team is currently reviewing your claim. We may contact you if additional information is needed. This process typically takes 3-5 business days."}),t==="approved"&&e.jsx("p",{className:"text-sm text-gray-600",children:"Your claim has been approved! The compensation will be processed within 7 business days and sent to your registered account."}),t==="rejected"&&e.jsx("p",{className:"text-sm text-gray-600",children:"Unfortunately, your claim has been rejected. Please review the notes above for the reason. You may submit a new claim or contact our support team for assistance."})]})]})},bs=()=>{const{user:t}=Ne(),{data:A=[],isLoading:$}=we(t==null?void 0:t._id),N=ss(),[h,b]=c.useState(""),[D,j]=c.useState(!1),[k,p]=c.useState(!1),[d,v]=c.useState(null),[m,E]=c.useState({cropType:"",cropArea:"",lotNumber:"",lotArea:"",plantingDate:"",expectedHarvestDate:"",insuranceDayLimit:"",notes:"",location:{lat:null,lng:null}}),O={Corn:{dayLimit:30,description:"Maize crop with 30-day insurance window"},Rice:{dayLimit:25,description:"Rice crop with 25-day insurance window"},Wheat:{dayLimit:20,description:"Wheat crop with 20-day insurance window"},Soybeans:{dayLimit:35,description:"Soybean crop with 35-day insurance window"},Cotton:{dayLimit:40,description:"Cotton crop with 40-day insurance window"},Sugarcane:{dayLimit:45,description:"Sugarcane crop with 45-day insurance window"},Coffee:{dayLimit:50,description:"Coffee crop with 50-day insurance window"},Cacao:{dayLimit:55,description:"Cacao crop with 55-day insurance window"},Other:{dayLimit:30,description:"Other crops with 30-day insurance window"}},Q=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,a=l=>{const{name:S,value:w}=l.target;E(I=>({...I,[S]:w})),S==="cropType"&&O[w]&&E(I=>({...I,cropType:w,insuranceDayLimit:O[w].dayLimit.toString()}))},K=async l=>{if(l.preventDefault(),!!(t!=null&&t._id))try{await N.mutateAsync({...m,farmerId:t._id,cropArea:parseFloat(m.cropArea),lotArea:parseFloat(m.lotArea),insuranceDayLimit:parseInt(m.insuranceDayLimit),plantingDate:new Date(m.plantingDate).toISOString(),expectedHarvestDate:new Date(m.expectedHarvestDate).toISOString()}),j(!1),E({cropType:"",cropArea:"",lotNumber:"",lotArea:"",plantingDate:"",expectedHarvestDate:"",insuranceDayLimit:"",notes:"",location:{lat:null,lng:null}}),y.getState().addFarmerNotification({id:Q(),type:"success",title:"Crop Insurance Created",message:"New crop insurance record has been created successfully.",timestamp:new Date},t._id)}catch(S){y.getState().addFarmerNotification({id:Q(),type:"error",title:"Error Creating Record",message:S.message,timestamp:new Date},t._id)}},x=l=>new Date(l).toLocaleDateString(),Y=l=>{const S=new Date,w=new Date(l.insuranceDeadline),I=Math.ceil((w-S)/(1e3*60*60*24));return Math.max(0,I)},P=l=>l.isInsured?"text-green-600":l.canInsure?"text-yellow-600":"text-red-600",g=l=>l.isInsured?"Insured":l.canInsure?"Can Insure":"Expired",ee=l=>l.isInsured?e.jsx(X,{className:"w-4 h-4 mr-1"}):l.canInsure?e.jsx(ve,{className:"w-4 h-4 mr-1"}):e.jsx(T,{className:"w-4 h-4 mr-1"}),se=A.filter(l=>{const S=l.cropType.toLowerCase(),w=h.toLowerCase();return S.includes(w)}),q={totalCrops:A.length,insuredCrops:A.filter(l=>l.isInsured).length,uninsuredCrops:A.filter(l=>!l.isInsured).length,expiredCrops:A.filter(l=>!l.canInsure&&!l.isInsured).length};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"My Crop Insurance"}),e.jsx("p",{className:"text-gray-600",children:"Manage your crop insurance records with day limits"})]}),e.jsxs("button",{onClick:()=>j(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-green-700",children:[e.jsx(Ye,{size:20}),"Add New Crop"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Crops"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:q.totalCrops})]}),e.jsx(_e,{className:"text-green-600",size:24})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Insured Crops"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:q.insuredCrops})]}),e.jsx(de,{className:"text-green-600",size:24})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Uninsured Crops"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:q.uninsuredCrops})]}),e.jsx(W,{className:"text-yellow-600",size:24})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Expired Insurance"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:q.expiredCrops})]}),e.jsx(T,{className:"text-red-600",size:24})]})})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by crop type...",value:h,onChange:l=>b(l.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})})})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Crop Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Planting Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expected Harvest"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Day Limit"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:se.map(l=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:l.cropType}),e.jsxs("div",{className:"text-sm text-gray-500",children:[l.cropArea," ha • Lot ",l.lotNumber]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:x(l.plantingDate)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:x(l.expectedHarvestDate)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:[l.insuranceDayLimit," days"]}),!l.isInsured&&l.canInsure&&e.jsxs("div",{className:"text-xs text-yellow-600",children:[Y(l)," days left"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${P(l)}`,children:[ee(l),g(l)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>{v(l),p(!0)},className:"text-blue-600 hover:text-blue-900",children:e.jsx(Ve,{size:16})})})})]},l._id))})]})})}),D&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Add New Crop Insurance Record"}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(T,{size:24})})]}),e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crop Type"}),e.jsxs("select",{name:"cropType",value:m.cropType,onChange:a,required:!0,className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",children:[e.jsx("option",{value:"",children:"Select Crop Type"}),Object.keys(O).map(l=>e.jsxs("option",{value:l,children:[l," (",O[l].dayLimit," days)"]},l))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Crop Area (hectares)"}),e.jsx("input",{type:"number",name:"cropArea",value:m.cropArea,onChange:a,required:!0,step:"0.01",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lot Number"}),e.jsx("input",{type:"text",name:"lotNumber",value:m.lotNumber,onChange:a,required:!0,className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lot Area (hectares)"}),e.jsx("input",{type:"number",name:"lotArea",value:m.lotArea,onChange:a,required:!0,step:"0.01",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Insurance Day Limit"}),e.jsx("input",{type:"number",name:"insuranceDayLimit",value:m.insuranceDayLimit,onChange:a,required:!0,className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Planting Date"}),e.jsx("input",{type:"date",name:"plantingDate",value:m.plantingDate,onChange:a,required:!0,className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Harvest Date"}),e.jsx("input",{type:"date",name:"expectedHarvestDate",value:m.expectedHarvestDate,onChange:a,required:!0,className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{name:"notes",value:m.notes,onChange:a,rows:"3",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:$,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:$?"Creating...":"Create Record"})]})]})]})}),k&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Crop Insurance Details"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(T,{size:24})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Crop Information"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Crop: ",d.cropType]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Area: ",d.cropArea," hectares"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Lot: ",d.lotNumber]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Lot Area: ",d.lotArea," hectares"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Timeline"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Planting: ",x(d.plantingDate)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Expected Harvest: ",x(d.expectedHarvestDate)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Insurance Deadline: ",x(d.insuranceDeadline)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Day Limit: ",d.insuranceDayLimit," days"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Insurance Status"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",e.jsx("span",{className:P(d),children:g(d)})]}),d.isInsured&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Insurance Date: ",x(d.insuranceDate)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Insurance Type: ",d.insuranceType]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Premium: ₱",d.premiumAmount]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Agency: ",d.agency]})]}),!d.isInsured&&d.canInsure&&e.jsx("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx(oe,{className:"inline w-4 h-4 mr-1"}),Y(d)," days remaining to apply insurance"]})}),!d.canInsure&&!d.isInsured&&e.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded",children:e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx(W,{className:"inline w-4 h-4 mr-1"}),"Insurance deadline has passed"]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Additional Information"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Created: ",x(d.createdAt)]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Updated: ",x(d.updatedAt)]}),d.notes&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Notes: ",d.notes]})]})]})]})})]})};xs.register(hs,ps,gs);const Ts=()=>{const{user:t,logout:A,userType:$}=Ne(),N=Pe();c.useEffect(()=>{if(!t){N("/");return}if($!=="farmer"){N("/admin");return}},[t,$,N]);const[h,b]=c.useState("home"),[D,j]=c.useState(!1),[k,p]=c.useState(!1),[d,v]=c.useState(!1),m=c.useMemo(()=>y.getState().getFarmerNotifications(t==null?void 0:t.id)||[],[t==null?void 0:t.id]),E=c.useMemo(()=>y.getState().getFarmerUnreadCount(t==null?void 0:t.id)||0,[t==null?void 0:t.id]),[O,Q]=c.useState(!1),[a,K]=c.useState(null),{data:x=[],refetch:Y}=ts(t==null?void 0:t.id),{data:P=[]}=we(t==null?void 0:t.id),g=c.useMemo(()=>!P||P.length===0?[]:Array.from(new Set(P.map(s=>s.cropType).filter(Boolean))),[P]),[ee,se]=c.useState(new Date),[q,l]=c.useState(!1),S=c.useMemo(()=>g&&g.length>0?g.join(", "):(t==null?void 0:t.cropType)||"Not provided",[g,t==null?void 0:t.cropType]),w=c.useMemo(()=>({...t,insuredCropTypes:g}),[t,g]),I=c.useCallback(async()=>{if(t&&t.id)try{l(!0),await Y(),se(new Date)}catch{}finally{l(!1)}},[t,Y]);c.useEffect(()=>{const s=setInterval(I,1e4),r=()=>{I()};return window.addEventListener("claimSubmitted",r),()=>{clearInterval(s),window.removeEventListener("claimSubmitted",r)}},[I]);const{data:_=[],isLoading:Ce,error:De}=as(),{data:M=[],isLoading:ke,error:Ae}=rs(t==null?void 0:t.id),Se=is(),me=Ce||ke,z=De||Ae,U=c.useCallback((s,r)=>{const i=new Date,n=`Q${Math.floor(i.getMonth()/3)+1}-${i.getFullYear()}`,o=M.some(H=>H.farmerId===s.id&&H.assistanceId===r._id&&H.quarter===n&&["pending","approved","distributed"].includes(H.status)),C=s.insuredCropTypes&&Array.isArray(s.insuredCropTypes)&&s.insuredCropTypes.length>0?s.insuredCropTypes.map(H=>String(H).toLowerCase()):s.cropType?[String(s.cropType).toLowerCase()]:[],f=!!(r.cropType&&C.length>0&&C.includes(String(r.cropType).toLowerCase())),R=!r.requiresRSBSA||s.rsbsaRegistered,ie=!r.requiresCertification||s.isCertified,le=r.availableQuantity>0;return{eligible:!o&&f&&R&&ie&&le,alreadyApplied:o,cropTypeMatch:f,rsbsaEligible:R,certificationEligible:ie,stockAvailable:le,reasons:{alreadyApplied:o?"Already applied this quarter":null,cropTypeMismatch:f?null:`Only for ${r.cropType} farmers`,rsbsaRequired:R?null:"RSBSA registration required",certificationRequired:ie?null:"Certification required",outOfStock:le?null:"Out of stock"}}},[M]),[Te,Z]=c.useState(!1),[u,xe]=c.useState(null),[V,Ie]=c.useState(!1),[te,he]=c.useState({requestedQuantity:"",notes:""}),[B,ae]=c.useState(1),re=3,L=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,Le=()=>{const s={pending:0,approved:0,rejected:0};x.forEach(i=>{var o;const n=((o=i.status)==null?void 0:o.toLowerCase())||"pending";Object.prototype.hasOwnProperty.call(s,n)&&s[n]++});const r=x.length;return{labels:["Pending","Approved","Rejected","Total Claims"],datasets:[{data:[s.pending,s.approved,s.rejected,r],backgroundColor:["#fbbf24","#84cc16","#ef4444","#22c55e"],borderColor:["#f59e0b","#65a30d","#dc2626","#16a34a"],borderWidth:2,hoverBackgroundColor:["#f59e0b","#65a30d","#dc2626","#16a34a"]}]}},G=c.useMemo(()=>{const s=_||[],r=g&&g.length>0?g.map(i=>String(i).toLowerCase()):t!=null&&t.cropType?[String(t.cropType).toLowerCase()]:[];return r.length===0?[]:s.filter(i=>{if(!(i!=null&&i.cropType))return!1;const n=String(i.cropType).toLowerCase();return r.includes(n)})},[_,g,t==null?void 0:t.cropType]),pe=B*re,$e=pe-re,J=Math.ceil(((G==null?void 0:G.length)||0)/re),Fe=()=>{A(),localStorage.removeItem("isFarmer"),N("/")},Me=s=>{K(s),Q(!0)},ze=()=>{j(!D),!D&&(t!=null&&t.id)&&y.getState().markFarmerNotificationsAsRead(t.id)};c.useEffect(()=>{if(D){const s=r=>{const i=document.querySelector(".notification-panel"),n=document.querySelector(".notification-button");i&&!i.contains(r.target)&&n&&!n.contains(r.target)&&j(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)}},[D]),c.useEffect(()=>{t&&t.cropType&&_.length>0&&_.filter(r=>r.cropType&&r.cropType.toLowerCase()===t.cropType.toLowerCase()&&r.status==="active").forEach(r=>{m.some(n=>n.title==="New Assistance Available"&&n.message.includes(r.assistanceType))||y.getState().addFarmerNotification({id:`new-assistance-${r._id}-${L()}`,type:"info",title:"New Assistance Available",message:`New ${r.assistanceType} assistance is now available for ${r.cropType} farmers!`,timestamp:new Date},t.id)})},[_,t==null?void 0:t.cropType]),c.useEffect(()=>{t&&t.id&&M.length>0&&M.forEach(s=>{var i,n,o;if(!m.find(C=>{var f;return C.title.includes("Application")&&C.message.includes(((f=s.assistanceId)==null?void 0:f.assistanceType)||"assistance")})&&s.status!=="pending"){let C="",f="",R="info";switch(s.status){case"approved":C="Application Approved",f=`Your application for ${((i=s.assistanceId)==null?void 0:i.assistanceType)||"assistance"} has been approved!`,R="success";break;case"rejected":C="Application Rejected",f=`Your application for ${((n=s.assistanceId)==null?void 0:n.assistanceType)||"assistance"} has been rejected. ${s.officerNotes?`Reason: ${s.officerNotes}`:""}`,R="error";break;case"distributed":C="Assistance Distributed",f=`Your ${((o=s.assistanceId)==null?void 0:o.assistanceType)||"assistance"} has been distributed successfully!`,R="success";break;default:return}y.getState().addFarmerNotification({id:`application-status-${s._id}-${L()}`,type:R,title:C,message:f,timestamp:new Date},t.id)}})},[M,t==null?void 0:t.id]);const Re=s=>{const i=Math.floor((new Date().getTime()-s.getTime())/(1e3*60*60));return i<1?"Just now":i<24?`${i}h ago`:`${Math.floor(i/24)}d ago`},ge=s=>{const{name:r,value:i}=s.target;he(n=>({...n,[r]:i}))},Ee=async s=>{if(s.preventDefault(),!(!u||!t))try{const r={...t,insuredCropTypes:g,cropType:g.length>0?g[0]:t.cropType};await Se.mutateAsync({farmerId:t.id,assistanceId:u._id,requestedQuantity:parseInt(te.requestedQuantity),farmerData:r}),he({requestedQuantity:"",notes:""}),Z(!1),xe(null),y.getState().addFarmerNotification({id:L(),type:"success",title:"Application Submitted",message:`Your application for ${u.assistanceType} has been submitted successfully.`,timestamp:new Date},t.id),y.getState().addAdminNotification({id:L(),type:"info",title:"New Assistance Application",message:`${t.name||"A farmer"} has applied for ${u.assistanceType} assistance.`,timestamp:new Date})}catch(r){y.getState().addFarmerNotification({id:L(),type:"error",title:"Application Failed",message:`Error: ${r.message}`,timestamp:new Date},t.id)}};return e.jsxs("div",{className:"min-h-screen bg-gray-100 flex flex-col",children:[e.jsx("header",{className:"bg-lime-700 text-white shadow-md",children:e.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>v(!d),className:"mr-4 md:hidden","aria-label":"Toggle menu",children:d?e.jsx(T,{size:24}):e.jsx(Ge,{size:24})}),e.jsx("img",{src:es,alt:"Farmer Logo",className:"h-15 w-auto mr-3"}),e.jsx("h1",{className:"text-xl font-bold",children:"FARMER DASHBOARD"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-white text-sm",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${q?"bg-yellow-400 animate-pulse":"bg-green-400"}`}),e.jsx("span",{className:"hidden sm:inline",children:q?"Refreshing...":"Live"}),e.jsxs("span",{className:"text-xs opacity-75",children:["Last: ",ee.toLocaleTimeString()]}),e.jsx("button",{onClick:()=>{l(!0),I()},className:"ml-2 px-2 py-1 bg-white bg-opacity-20 rounded text-xs hover:bg-opacity-30 transition-colors",title:"Manual refresh",children:"↻"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:ze,className:`relative p-2 rounded-full bg-lime-700 text-white hover:bg-lime-800 focus:outline-none focus:ring-2 focus:ring-lime-500 notification-button ${E>0?"animate-pulse":""}`,"aria-label":"Notifications",children:[e.jsx(be,{className:"h-6 w-6"}),E>0&&e.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full animate-pulse",children:E})]}),D&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 sm:w-96 bg-white rounded-lg shadow-xl z-50 overflow-hidden notification-panel",children:[e.jsxs("div",{className:"p-4 bg-lime-700 text-white flex justify-between items-center",children:[e.jsx("h3",{className:"font-semibold",children:"Notifications"}),m.length>0&&e.jsx("button",{onClick:()=>{y.getState().clearFarmerNotifications(t==null?void 0:t.id)},className:"text-white hover:text-gray-200 text-sm",title:"Clear all notifications",children:"Clear All"})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto hide-scrollbar",children:m.length===0?e.jsxs("div",{className:"p-4 text-center text-gray-500",children:[e.jsx(Je,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No notifications"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Debug: ",m.length," notifications found"]})]}):m.map(s=>e.jsx("div",{className:"p-4 border-b border-gray-100 hover:bg-gray-50",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0 mr-3",children:s.type==="success"?e.jsx(X,{className:"h-5 w-5 text-green-500"}):s.type==="error"?e.jsx(T,{className:"h-5 w-5 text-red-500"}):s.type==="warning"?e.jsx(W,{className:"h-5 w-5 text-yellow-500"}):e.jsx(oe,{className:"h-5 w-5 text-blue-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:Re(new Date(s.timestamp))}),e.jsx("button",{onClick:()=>y.getState().removeNotification(s.id,t==null?void 0:t.id),className:"text-gray-400 hover:text-red-500 transition-colors","aria-label":"Remove notification",children:e.jsx(T,{size:14})})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.message})]})]})},s.id))})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>p(!k),className:"flex items-center space-x-2 focus:outline-none","aria-label":"User menu",children:[e.jsx("div",{className:"w-8 h-8 bg-white text-lime-700 rounded-full flex items-center justify-center",children:e.jsx(ye,{size:18})}),e.jsx(ne,{size:16,className:`transition-transform ${k?"rotate-180":""}`})]}),k&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-20",children:[e.jsxs("button",{onClick:()=>{b("settings"),p(!1)},className:"flex items-center w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100",children:[e.jsx(Xe,{size:16,className:"mr-2"}),"Settings"]}),e.jsxs("button",{onClick:()=>{y.getState().addFarmerNotification({id:L(),type:"info",title:"Help Center",message:"Help Center coming soon!",timestamp:new Date},t.id)},className:"flex items-center w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100",children:[e.jsx(Ze,{size:16,className:"mr-2"}),"Help Center"]}),e.jsxs("button",{onClick:()=>{y.getState().addFarmerNotification({id:L(),type:"success",title:"Test Notification",message:"This is a test notification to verify the system is working!",timestamp:new Date},t.id)},className:"flex items-center w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100",children:[e.jsx(be,{size:16,className:"mr-2"}),"Test Notification"]}),e.jsxs("button",{onClick:Fe,className:"flex items-center w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100",children:[e.jsx(Ke,{size:16,className:"mr-2"}),"Logout"]})]})]})]})]})}),e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{id:"mobile-sidebar",className:`fixed inset-y-0 left-0 transform ${d?"translate-x-0":"-translate-x-full"} md:hidden transition duration-200 ease-in-out z-30 w-64 bg-white shadow-lg`,children:[e.jsx("div",{className:"p-4 bg-lime-700 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold",children:"Menu"}),e.jsx("button",{onClick:()=>v(!1),className:"text-white hover:text-gray-200 focus:outline-none",children:e.jsx(T,{size:20})})]})}),e.jsx("nav",{className:"p-4",children:e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsxs("button",{onClick:()=>{b("home"),v(!1)},className:`flex items-center w-full p-2 rounded-lg ${h==="home"?"bg-lime-100 text-lime-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(fe,{size:20,className:"mr-3"}),"Home"]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>{b("claims"),v(!1),y.getState().addFarmerNotification({id:L(),type:"info",title:"Claims Overview",message:"Viewing your insurance claims and their current status.",timestamp:new Date},t==null?void 0:t.id)},className:`flex items-center w-full p-2 rounded-lg ${h==="claims"?"bg-lime-100 text-lime-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(F,{size:20,className:"mr-3"}),"My Claims"]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>{b("assistance"),v(!1),y.getState().addFarmerNotification({id:L(),type:"info",title:"Government Assistance",message:"Browse available government assistance programs for your crop type.",timestamp:new Date},t==null?void 0:t.id)},className:`flex items-center w-full p-2 rounded-lg ${h==="assistance"?"bg-lime-100 text-lime-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(ce,{size:20,className:"mr-3"}),"Government Assistance"]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>{b("crop-insurance"),v(!1)},className:`flex items-center w-full p-2 rounded-lg ${h==="crop-insurance"?"bg-lime-100 text-lime-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(de,{size:20,className:"mr-3"}),"Crop Insurance"]})})]})})]}),e.jsx("aside",{className:"hidden md:block w-64 bg-white shadow-md",children:e.jsx("nav",{className:"p-4",children:e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsxs("button",{onClick:()=>b("home"),className:`flex items-center w-full p-2 rounded-lg ${h==="home"?"bg-lime-100 text-lime-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(fe,{size:20,className:"mr-3"}),"Home"]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>b("claims"),className:`flex items-center w-full p-2 rounded-lg ${h==="claims"?"bg-lime-100 text-lime-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(F,{size:20,className:"mr-3"}),"My Claims"]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>b("calendar"),className:`flex items-center w-full p-2 rounded-lg ${h==="calendar"?"bg-lime-100 text-lime-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(ce,{size:20,className:"mr-3"}),"Calendar"]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>b("assistance"),className:`flex items-center w-full p-2 rounded-lg ${h==="assistance"?"bg-lime-100 text-lime-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(F,{size:20,className:"mr-3"}),"Government Assistance"]})}),e.jsx("li",{children:e.jsxs("button",{onClick:()=>b("crop-insurance"),className:`flex items-center w-full p-2 rounded-lg ${h==="crop-insurance"?"bg-lime-100 text-lime-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(de,{size:20,className:"mr-3"}),"Crop Insurance"]})})]})})}),e.jsxs("main",{className:"flex-1 p-2 sm:p-4 bg-white",children:[h==="home"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold mb-3 sm:mb-4 text-lime-800",children:"Farm Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white rounded-xl shadow-lg p-3 sm:p-4 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center mb-2 sm:mb-3",children:[e.jsx(ye,{size:18,className:"text-blue-600 mr-2 sm:w-5 sm:h-5"}),e.jsx("h3",{className:"text-sm sm:text-lg font-semibold text-blue-800",children:"Personal Info"})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("p",{className:"font-semibold text-gray-800 text-sm sm:text-base break-words",children:(t==null?void 0:t.name)||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("p",{className:"font-semibold text-gray-800 text-sm sm:text-base break-words",children:(t==null?void 0:t.phone)||"Not provided"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white rounded-xl shadow-lg p-3 sm:p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center mb-2 sm:mb-3",children:[e.jsxs("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("h3",{className:"text-sm sm:text-lg font-semibold text-green-800",children:"Location"})]}),e.jsx("div",{className:"space-y-1 sm:space-y-2",children:e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Address"}),e.jsx("p",{className:"font-semibold text-gray-800 text-sm sm:text-base break-words",children:(t==null?void 0:t.address)||"Not provided"})]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-white rounded-xl shadow-lg p-3 sm:p-4 border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center mb-2 sm:mb-3",children:[e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsx("h3",{className:"text-sm sm:text-lg font-semibold text-yellow-800",children:"Farm Details"})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Crop Type"}),e.jsx("p",{className:"font-semibold text-gray-800 text-sm sm:text-base break-words",children:S})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Area"}),e.jsx("p",{className:"font-semibold text-gray-800 text-sm sm:text-base break-words",children:t!=null&&t.cropArea?`${t.cropArea} hectares`:"Not provided"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-white rounded-xl shadow-lg p-3 sm:p-4 border border-purple-200",children:[e.jsxs("div",{className:"flex items-center mb-2 sm:mb-3",children:[e.jsx(F,{size:18,className:"text-purple-600 mr-2 sm:w-5 sm:h-5"}),e.jsx("h3",{className:"text-sm sm:text-lg font-semibold text-purple-800",children:"Insurance"})]}),e.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Insurance ID"}),e.jsx("p",{className:"font-semibold text-gray-800 text-sm sm:text-base break-words",children:(t==null?void 0:t.id)||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(X,{size:12,className:"mr-1"}),"Active"]})]})]})]})]})]}),e.jsxs("div",{className:"bg-lime-700 rounded-xl p-4 sm:p-6 text-white space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{size:20,className:"sm:w-6 sm:h-6"}),e.jsx("h2",{className:"text-base sm:text-lg font-bold",children:"File a Disaster Insurance Claim"})]}),e.jsx("p",{className:"text-lime-100 text-sm sm:text-base",children:"If your crops have been damaged by natural disasters, file a claim to receive compensation."}),e.jsx("button",{onClick:()=>N("/farmer-form"),className:"w-full bg-white text-lime-800 font-bold py-2 sm:py-3 rounded-lg hover:bg-lime-100 transition text-sm sm:text-base",children:"File New Claim"})]}),x.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold mb-3 sm:mb-4 text-lime-800",children:"Latest Claim Status"}),e.jsx(js,{status:x[0].status,claimId:x[0].claimNumber||x[0]._id,submittedDate:x[0].date,reviewDate:x[0].reviewDate,completionDate:x[0].completionDate,notes:x[0].adminFeedback||"Your claim is being processed."})]})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"bg-white p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold mb-3 sm:mb-4 text-lime-800",children:"Claims Status Overview"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsx("div",{className:"w-48 h-48 sm:w-64 sm:h-64",children:e.jsx(ms,{data:Le(),options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,font:{size:12}}},tooltip:{callbacks:{label:function(s){const r=s.label||"",i=s.parsed,n=s.dataset.data.reduce((C,f)=>C+f,0),o=(i/n*100).toFixed(1);return`${r}: ${i} (${o}%)`}}}}}})}),e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-400"}),e.jsxs("span",{children:["Pending: ",x.filter(s=>{var r;return((r=s.status)==null?void 0:r.toLowerCase())==="pending"}).length]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-lime-500"}),e.jsxs("span",{children:["Approved: ",x.filter(s=>{var r;return((r=s.status)==null?void 0:r.toLowerCase())==="approved"}).length]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsxs("span",{children:["Rejected: ",x.filter(s=>{var r;return((r=s.status)==null?void 0:r.toLowerCase())==="rejected"}).length]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsxs("span",{children:["Total Claims: ",x.length]})]})]})]})]}),e.jsx(us,{}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold mb-3 sm:mb-4 text-lime-800",children:"Recent Notifications"}),e.jsx("div",{className:"space-y-3 sm:space-y-4"})]})]})]}),h==="claims"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"My Claims"}),e.jsx("button",{onClick:()=>N("/farmer-form"),className:"bg-lime-700 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-lime-800 transition text-sm sm:text-base",children:"File New Claim"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Claim ID"}),e.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.length>0?x.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.claimNumber||s._id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.type||s.damageType}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                              ${s.status==="approved"?"bg-green-100 text-green-800":s.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsx("button",{onClick:()=>Me(s),className:"text-lime-700 hover:text-lime-900",children:"View Details"})})]},s._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-8 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(F,{className:"h-12 w-12 text-gray-300 mb-2"}),e.jsx("p",{className:"text-lg font-medium",children:"No claims found"}),e.jsx("p",{className:"text-sm",children:"You haven't submitted any insurance claims yet."}),e.jsx("button",{onClick:()=>N("/farmer-form"),className:"mt-4 bg-lime-700 text-white px-4 py-2 rounded-lg hover:bg-lime-800 transition",children:"Submit Your First Claim"})]})})})})]})})})]}),h==="calendar"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Farming Calendar"}),e.jsx("button",{className:"bg-lime-700 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-lime-800 transition text-sm sm:text-base",children:"Add Event"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(ne,{className:"h-4 w-4 sm:h-5 sm:w-5 rotate-90"})}),e.jsx("h3",{className:"text-lg sm:text-xl font-semibold",children:"December 2024"}),e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(ne,{className:"h-4 w-4 sm:h-5 sm:w-5 -rotate-90"})})]}),e.jsxs("div",{className:"flex space-x-1 sm:space-x-2",children:[e.jsx("button",{className:"px-2 sm:px-3 py-1 text-xs sm:text-sm bg-lime-100 text-lime-700 rounded-md",children:"Month"}),e.jsx("button",{className:"px-2 sm:px-3 py-1 text-xs sm:text-sm text-gray-600 hover:bg-gray-100 rounded-md",children:"Week"}),e.jsx("button",{className:"px-2 sm:px-3 py-1 text-xs sm:text-sm text-gray-600 hover:bg-gray-100 rounded-md",children:"Day"})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(s=>e.jsx("div",{className:"p-2 sm:p-3 text-center text-xs sm:text-sm font-medium text-gray-500 bg-gray-50 rounded-lg",children:s},s))}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[[26,27,28,29,30].map(s=>e.jsx("div",{className:"p-2 sm:p-3 text-center text-xs sm:text-sm text-gray-400 hover:bg-gray-50 rounded-lg cursor-pointer min-h-[60px] sm:min-h-[80px]",children:s},`prev-${s}`)),Array.from({length:31},(s,r)=>r+1).map(s=>{const r=s===15;return e.jsxs("div",{className:`p-2 sm:p-3 text-center text-xs sm:text-sm hover:bg-gray-50 rounded-lg cursor-pointer min-h-[60px] sm:min-h-[80px] relative ${r?"bg-lime-100 text-lime-700 font-semibold":""}`,children:[e.jsx("span",{className:`${r?"bg-lime-700 text-white px-2 py-1 rounded-full text-xs":""}`,children:s}),s===5&&e.jsx("div",{className:"mt-1",children:e.jsx("div",{className:"bg-blue-100 text-blue-800 text-xs px-1 py-0.5 rounded mb-1 truncate",children:"Planting"})}),s===12&&e.jsx("div",{className:"mt-1",children:e.jsx("div",{className:"bg-yellow-100 text-yellow-800 text-xs px-1 py-0.5 rounded mb-1 truncate",children:"Fertilizer"})}),s===18&&e.jsx("div",{className:"mt-1",children:e.jsx("div",{className:"bg-green-100 text-green-800 text-xs px-1 py-0.5 rounded mb-1 truncate",children:"Harvest"})}),s===25&&e.jsx("div",{className:"mt-1",children:e.jsx("div",{className:"bg-red-100 text-red-800 text-xs px-1 py-0.5 rounded mb-1 truncate",children:"Insurance Due"})})]},s)}),[1,2,3,4].map(s=>e.jsx("div",{className:"p-3 text-center text-sm text-gray-400 hover:bg-gray-50 rounded-lg cursor-pointer min-h-[80px]",children:s},`next-${s}`))]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Upcoming Events"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-blue-800",children:"Rice Planting Season"}),e.jsx("p",{className:"text-sm text-blue-600",children:"Dec 5, 2024 - Jan 15, 2025"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-yellow-50 rounded-lg",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-yellow-800",children:"Fertilizer Application"}),e.jsx("p",{className:"text-sm text-yellow-600",children:"Dec 12, 2024"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-green-800",children:"Harvest Time"}),e.jsx("p",{className:"text-sm text-green-600",children:"Dec 18, 2024"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-red-800",children:"Insurance Premium Due"}),e.jsx("p",{className:"text-sm text-red-600",children:"Dec 25, 2024"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Farming Tips"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-lime-50 rounded-lg border-l-4 border-lime-500",children:[e.jsx("h4",{className:"font-medium text-lime-800",children:"December Planting"}),e.jsx("p",{className:"text-sm text-lime-700 mt-1",children:"Best time to plant rice in your region. Ensure proper soil preparation and water management."})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border-l-4 border-blue-500",children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Weather Watch"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Monitor weather patterns closely. Heavy rains expected this week - ensure proper drainage."})]}),e.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg border-l-4 border-orange-500",children:[e.jsx("h4",{className:"font-medium text-orange-800",children:"Pest Control"}),e.jsx("p",{className:"text-sm text-orange-700 mt-1",children:"December is peak season for certain pests. Regular monitoring and early intervention recommended."})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{className:"p-4 border-2 border-dashed border-lime-300 rounded-lg hover:border-lime-500 hover:bg-lime-50 transition",children:[e.jsx(ce,{className:"h-8 w-8 text-lime-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-lime-700",children:"Schedule Planting"})]}),e.jsxs("button",{className:"p-4 border-2 border-dashed border-blue-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition",children:[e.jsx(W,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-blue-700",children:"Set Reminder"})]}),e.jsxs("button",{className:"p-4 border-2 border-dashed border-purple-300 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition",children:[e.jsx(F,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm font-medium text-purple-700",children:"Add Farm Note"})]})]})]})]}),h==="assistance"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800",children:"Available Government Assistance"})}),z&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-red-700 font-medium",children:"Error loading assistance data"})]}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:(z==null?void 0:z.message)||"Unknown error"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 text-red-600 hover:text-red-800 text-sm font-medium",children:"Try again"})]}),me&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),e.jsx("p",{className:"text-blue-700",children:"Loading assistance data..."})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:G.length>0?G.slice($e,pe).map((s,r)=>{const i=U(w,s),n=i.eligible;return e.jsxs("div",{className:"bg-white rounded-xl shadow p-6 flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s.assistanceType}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Crop Type: ",s.cropType]})]}),e.jsx("span",{className:`text-xs font-medium px-2.5 py-0.5 rounded-full ${s.status==="active"?"bg-lime-100 text-lime-800":"bg-red-100 text-red-800"}`,children:s.status==="active"?"Available":"Out of Stock"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Available Quantity:"})," ",s.availableQuantity||0]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Max per Farmer:"})," ",s.maxQuantityPerFarmer||100,"kg"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Date Added:"})," ",new Date(s.dateAdded).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Founder:"})," ",s.founderName]}),s.requiresRSBSA&&e.jsx("p",{className:"text-sm text-orange-600",children:e.jsx("span",{className:"font-medium",children:"⚠️ RSBSA Registration Required"})}),e.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded-lg",children:[e.jsxs("p",{className:"text-xs text-blue-700",children:[e.jsx("span",{className:"font-medium",children:"📅 Quarterly Limit:"})," One application per quarter"]}),e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Current Quarter: ",(()=>{const o=new Date;return`Q${Math.floor(o.getMonth()/3)+1}-${o.getFullYear()}`})()]}),i.alreadyApplied&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["⚠️ You've already applied this quarter. Next available: ",(()=>{const o=new Date,C=o.getMonth()>=9?1:Math.floor(o.getMonth()/3)+2,f=o.getMonth()>=9?o.getFullYear()+1:o.getFullYear();return`Q${C}-${f}`})()]})]})]}),e.jsx("button",{className:`w-full px-4 py-2 rounded-lg transition ${n?"bg-lime-700 text-white hover:bg-lime-800":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:()=>{if(n)xe(s),Z(!0);else{let o="";i.rsbsaEligible?i.cropTypeMatch?i.alreadyApplied?o="You have already applied for this assistance this quarter.":i.stockAvailable?i.certificationEligible?o="You are not eligible for this assistance.":o="Certification is required for this assistance.":o="This assistance is currently out of stock.":o=`This assistance is only for ${s.cropType} farmers.`:o="RSBSA registration is required for this assistance.",y.getState().addFarmerNotification({id:L(),type:"warning",title:"Application Not Available",message:o,timestamp:new Date},t.id)}},disabled:!n,title:i.rsbsaEligible?i.cropTypeMatch?i.alreadyApplied?"You have already applied for this assistance this quarter.":i.stockAvailable?i.certificationEligible?"":"Certification is required for this assistance.":"This assistance is currently out of stock.":`This assistance is only for ${s.cropType} farmers.`:"RSBSA registration is required for this assistance.",children:n?"Apply for Assistance":i.rsbsaEligible?i.cropTypeMatch?i.alreadyApplied?"Already Applied This Quarter":i.stockAvailable?i.certificationEligible?"Not Eligible":"Certification Required":"Out of Stock":"Crop Type Not Eligible":"RSBSA Required"})]}),s.photo&&e.jsx("div",{className:"ml-0 md:ml-6 flex-shrink-0 flex items-center justify-center w-full md:w-32 h-32 mt-4 md:mt-0",children:e.jsx("img",{src:s.photo,alt:"Assistance Logo",className:"object-contain w-full h-full rounded-lg border"})})]},r)}):e.jsx("div",{className:"col-span-full text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No government assistance available for your region at the moment."})})}),J>1&&e.jsx("div",{className:"flex justify-center mt-6",children:e.jsxs("nav",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>ae(s=>Math.max(s-1,1)),disabled:B===1,className:`px-3 py-1 rounded-md ${B===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-lime-100 text-lime-800 hover:bg-lime-200"}`,children:"Previous"}),[...Array(J)].map((s,r)=>e.jsx("button",{onClick:()=>ae(r+1),className:`px-3 py-1 rounded-md ${B===r+1?"bg-lime-700 text-white":"bg-lime-100 text-lime-800 hover:bg-lime-200"}`,children:r+1},r)),e.jsx("button",{onClick:()=>ae(s=>Math.min(s+1,J)),disabled:B===J,className:`px-3 py-1 rounded-md ${B===J?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-lime-100 text-lime-800 hover:bg-lime-200"}`,children:"Next"})]})}),M.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-0 mb-4",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800",children:"My Assistance Applications"}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>Ie(!V),className:"text-green-600 hover:text-green-800 px-3 sm:px-4 py-2 rounded-lg border border-green-600 hover:bg-green-50 text-sm sm:text-base",children:V?"Show Recent Applications":"View All Applications"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assistance Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity Requested"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Applied"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),V&&e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Review Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Admin Feedback"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(V?M:M.slice(0,5)).map(s=>{var r;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((r=s.assistanceId)==null?void 0:r.assistanceType)||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.requestedQuantity}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(s.applicationDate).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${s.status==="approved"?"bg-green-100 text-green-800":s.status==="rejected"?"bg-red-100 text-red-800":s.status==="distributed"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:s.status})}),V&&e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.reviewDate?new Date(s.reviewDate).toLocaleDateString():"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:s.officerNotes?e.jsx("div",{className:"max-w-xs",children:e.jsx("p",{className:"text-gray-700",children:s.officerNotes})}):e.jsx("span",{className:"text-gray-400",children:"No feedback yet"})})]},s._id)})})]})})]}),me&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Loading assistance items..."})}),z&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:e.jsxs("p",{children:["Error: ",(z==null?void 0:z.message)||"Unknown error"]})})]}),h==="crop-insurance"&&e.jsx("div",{className:"p-6",children:e.jsx(bs,{})}),h==="settings"&&e.jsxs("div",{className:"bg-white rounded-xl shadow p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Account Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded-md",defaultValue:"Juan Dela Cruz"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",className:"w-full p-2 border rounded-md",defaultValue:"juan@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",className:"w-full p-2 border rounded-md",defaultValue:"09123456789"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Notification Preferences"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"rounded text-lime-600 mr-2",defaultChecked:!0}),e.jsx("span",{children:"Email notifications"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"rounded text-lime-600 mr-2",defaultChecked:!0}),e.jsx("span",{children:"SMS notifications"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"rounded text-lime-600 mr-2",defaultChecked:!0}),e.jsx("span",{children:"Weather alerts"})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{className:"bg-lime-700 text-white px-4 py-2 rounded-md hover:bg-lime-800",children:"Save Changes"})})]})]})]})]}),O&&a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-lime-700 text-white p-4 rounded-t-xl flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Claim Details"}),e.jsx("button",{onClick:()=>Q(!1),className:"text-white hover:text-gray-200 focus:outline-none",children:e.jsx(T,{size:24})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-lime-50 p-4 rounded-lg border border-lime-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-lime-800 mb-3 flex items-center gap-2",children:[e.jsx(oe,{size:20}),"Basic Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Claim ID"}),e.jsx("p",{className:"font-medium",children:(a==null?void 0:a.id)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Type of Damage"}),e.jsx("p",{className:"font-medium",children:(a==null?void 0:a.type)||(a==null?void 0:a.damageType)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Date Filed"}),e.jsx("p",{className:"font-medium",children:a!=null&&a.date?new Date(a.date).toLocaleDateString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Status"}),e.jsx("p",{className:`font-medium ${(a==null?void 0:a.status)==="approved"?"text-green-600":(a==null?void 0:a.status)==="pending"?"text-yellow-600":"text-red-600"}`,children:a!=null&&a.status?a.status.charAt(0).toUpperCase()+a.status.slice(1):"N/A"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-3",children:"Crop Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Crop Type"}),e.jsx("p",{className:"font-medium",children:(a==null?void 0:a.crop)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Area Insured"}),e.jsx("p",{className:"font-medium",children:a!=null&&a.areaInsured?`${a.areaInsured} hectares`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Area Damaged"}),e.jsx("p",{className:"font-medium",children:a!=null&&a.areaDamaged?`${a.areaDamaged} hectares`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Degree of Damage"}),e.jsx("p",{className:"font-medium",children:a!=null&&a.degreeOfDamage?`${a.degreeOfDamage}%`:"N/A"})]})]})]})]}),(a==null?void 0:a.damagePhotos)&&a.damagePhotos.length>0&&e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-orange-800 mb-3 flex items-center gap-2",children:["📷 Damage Evidence Photos (",a.damagePhotos.length,")"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:a.damagePhotos.map((s,r)=>typeof s=="string"&&s.startsWith("data:")?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:s,alt:`Damage evidence ${r+1}`,className:"w-full h-32 object-cover rounded-lg border cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const n=document.createElement("div");n.className="fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center p-4",n.innerHTML=`
                                <div class="relative max-w-4xl max-h-full">
                                  <img src="${s}" alt="Damage evidence ${r+1}" class="max-w-full max-h-full object-contain" />
                                  <button class="absolute top-4 right-4 bg-white bg-opacity-20 text-white p-2 rounded-full hover:bg-opacity-30 transition-colors" onclick="this.parentElement.parentElement.remove()">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                  </button>
                                </div>
                              `,document.body.appendChild(n),n.addEventListener("click",o=>{o.target===n&&n.remove()})}}),e.jsxs("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded",children:["Photo ",r+1]})]},r):e.jsx("div",{className:"relative group",children:e.jsx("div",{className:"w-full h-32 bg-gray-200 rounded-lg border flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(F,{className:"h-8 w-8 text-gray-400 mx-auto mb-1"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Photo ",r+1]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Not available"})]})})},r))}),e.jsx("p",{className:"text-sm text-orange-700 mt-3",children:"Click on any photo to view it in full size"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Claim Timeline"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-lime-100 p-2 rounded-full",children:e.jsx(F,{size:16,className:"text-lime-700"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Claim Submitted"}),e.jsx("p",{className:"text-sm text-gray-500",children:a!=null&&a.date?new Date(a.date).toLocaleDateString():"N/A"})]})]}),(a==null?void 0:a.reviewDate)&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-yellow-100 p-2 rounded-full",children:e.jsx(W,{size:16,className:"text-yellow-700"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Under Review"}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(a.reviewDate).toLocaleDateString()})]})]}),(a==null?void 0:a.completionDate)&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`${(a==null?void 0:a.status)==="approved"?"bg-green-100":"bg-red-100"} p-2 rounded-full`,children:(a==null?void 0:a.status)==="approved"?e.jsx(X,{size:16,className:"text-green-700"}):e.jsx(T,{size:16,className:"text-red-700"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(a==null?void 0:a.status)==="approved"?"Approved":"Rejected"}),e.jsx("p",{className:"text-sm text-gray-500",children:a!=null&&a.completionDate?new Date(a.completionDate).toLocaleDateString():"N/A"})]})]})]})]}),(a==null?void 0:a.status)==="approved"&&e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-3",children:"Insurance Compensation Details"}),(()=>{const s=ls(Number.parseFloat((a==null?void 0:a.areaDamaged)||0),Number.parseFloat((a==null?void 0:a.degreeOfDamage)||0),(a==null?void 0:a.crop)||"Other",(a==null?void 0:a.damageType)||"Other"),r=ns(a==null?void 0:a.completionDate),i=cs(Number.parseFloat((a==null?void 0:a.degreeOfDamage)||0)),n=ds((a==null?void 0:a.crop)||"Other");return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Final Compensation"}),e.jsxs("p",{className:"font-bold text-2xl text-green-700",children:["₱",s.finalCompensation.toLocaleString()]})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${r.bgColor} ${r.statusColor}`,children:r.status})]})}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Payment Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Payment Status"}),e.jsx("p",{className:`font-medium ${r.statusColor}`,children:r.status}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.message})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Expected Payment Date"}),e.jsx("p",{className:"font-medium",children:os(a==null?void 0:a.completionDate)})]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Damage Assessment"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Damage Severity"}),e.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-sm font-medium ${i.bgColor} ${i.color}`,children:i.level}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.description})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Coverage Type"}),e.jsx("p",{className:"font-medium",children:n.coverage}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Base Rate: ₱",n.rate.toLocaleString(),"/hectare"]})]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Calculation Breakdown"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Area Damaged:"}),e.jsxs("span",{className:"font-medium",children:[(a==null?void 0:a.areaDamaged)||0," hectares"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Degree of Damage:"}),e.jsxs("span",{className:"font-medium",children:[(a==null?void 0:a.degreeOfDamage)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Crop Type:"}),e.jsx("span",{className:"font-medium",children:(a==null?void 0:a.crop)||"Other"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Damage Type:"}),e.jsx("span",{className:"font-medium",children:(a==null?void 0:a.damageType)||"Other"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Base Rate:"}),e.jsxs("span",{className:"font-medium",children:["₱",s.cropRate.toLocaleString(),"/hectare"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Damage Multiplier:"}),e.jsxs("span",{className:"font-medium",children:[s.damageMultiplier,"x"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Base Calculation:"}),e.jsxs("span",{className:"font-medium",children:["₱",s.baseCompensation.toLocaleString()]})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between font-semibold",children:[e.jsx("span",{className:"text-green-700",children:"Final Compensation:"}),e.jsxs("span",{className:"text-green-700",children:["₱",s.finalCompensation.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Insurance Terms"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"• Minimum compensation: ₱1,000"}),e.jsx("li",{children:"• Maximum compensation: ₱20,000"}),e.jsx("li",{children:"• Processing time: 3-7 business days"}),e.jsx("li",{children:"• Payment method: Bank transfer or check"}),e.jsx("li",{children:"• Coverage period: From planting to harvest"})]})]})]})})()]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:()=>Q(!1),className:"bg-lime-700 text-white px-6 py-2 rounded-lg hover:bg-lime-800 transition",children:"Close"})})]})]})}):null,Te&&u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Request Assistance"}),e.jsx("button",{onClick:()=>Z(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(T,{size:24})})]}),e.jsxs("form",{onSubmit:Ee,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("input",{type:"text",value:(t==null?void 0:t.name)||"",disabled:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100 text-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),e.jsx("input",{type:"text",value:(t==null?void 0:t.address)||"",disabled:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100 text-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Crop Type"}),e.jsx("input",{type:"text",value:S,disabled:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100 text-gray-500"}),g.length>0&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"✓ Based on your active crop insurance records"}),!g.length&&!(t!=null&&t.cropType)&&e.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"⚠️ No crop type found. Please ensure you have active crop insurance."}),!g.length&&(t==null?void 0:t.cropType)&&e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"ℹ️ Using crop type from farmer profile. Consider adding crop insurance for better assistance eligibility."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Area"}),e.jsx("input",{type:"text",value:t!=null&&t.cropArea?`${t.cropArea} hectares`:"",disabled:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100 text-gray-500"})]})]}),u&&e.jsxs("div",{className:"mt-4 p-3 rounded-lg border",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Eligibility Check"}),e.jsx("div",{className:"flex items-center gap-2",children:(()=>{const s=U(w,u);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${s.cropTypeMatch?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:`text-sm ${s.cropTypeMatch?"text-green-700":"text-red-700"}`,children:s.cropTypeMatch?`✓ Crop type matches (${u.cropType})`:`✗ Crop type mismatch - Assistance is for ${u.cropType} farmers`})]})})()})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Assistance Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assistance Type"}),e.jsx("input",{type:"text",value:u.assistanceType,disabled:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100 text-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Available Quantity"}),e.jsx("input",{type:"text",value:u.availableQuantity||0,disabled:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-100 text-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity Requested (kg)"}),e.jsx("input",{type:"number",name:"requestedQuantity",value:te.requestedQuantity,onChange:ge,min:"1",max:u.maxQuantityPerFarmer||100,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-lime-500 focus:border-lime-500",placeholder:"Enter quantity in kg"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Maximum: ",u.maxQuantityPerFarmer||100,"kg per farmer"]}),e.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["📅 Quarterly Limit: One application per quarter (Current: ",(()=>{const s=new Date;return`Q${Math.floor(s.getMonth()/3)+1}-${s.getFullYear()}`})(),")"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Notes"}),e.jsx("textarea",{name:"notes",value:te.notes,onChange:ge,className:"w-full border border-gray-300 rounded-md p-2 focus:ring-lime-500 focus:border-lime-500",rows:3,placeholder:"Any additional notes or special requirements (optional)"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>Z(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u&&!U(w,u).eligible,className:`px-4 py-2 rounded transition ${u&&!U(w,u).eligible?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-lime-700 text-white hover:bg-lime-800"}`,children:u&&!U(w,u).eligible?"Not Eligible":"Submit Request"})]})]})]})})]})};export{Ts as default};
